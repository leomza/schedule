"use strict";var clientIdEdit,handleForm=document.querySelector("#formCreate");function handleNewClient(n){var t,r,a,i,o,c,l,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.preventDefault(),t=n.target.elements,r=t.clientname,a=t.phone,i=t.email,o=t.projectType,c=t.callLimitPerDay,r=r.value,a=a.value,i=i.value,o=o.value,c=c.value,modalCreate.style.display="none",n.target.reset(),l={clientname:r,phone:a,email:i,projectType:o,callLimitPerDay:c},e.next=13,regeneratorRuntime.awrap(axios.post("/clients/register",l));case 13:s=e.sent,swal("Good job!","New user added succesfully!","success"),renderClients(s.data.allClients.clients),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error(e.t0);case 21:case"end":return e.stop()}},null,null,[[0,18]])}function renderClients(n){var t,r,a,i;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=document.querySelector(".table")){e.next=4;break}throw new Error("There is a problem finding table from HTML");case 4:if(n){e.next=10;break}return e.next=7,regeneratorRuntime.awrap(axios.get("/clients/getAllClients"));case 7:r=e.sent,a=r.data.allClients.clients,n=a;case 10:i=n.map(function(e){return"<tr>\n            <td>".concat(e.clientname,"</td>\n            <td>").concat(e.phone,"</td> \n            <td>").concat(e.email,"</td>\n            <td>").concat(e.projectType,"</td>  \n            <td>").concat(e.callLimitPerDay,'</td>  \n             \n            <td class="icons">\n<div class="icons__update">\n            <img  src="./img/update.svg" alt="" class="table__edit" onclick=\'editClient("').concat(e.uuid,'")\' title="Edit"> \n            </div>\n            <div class="icons__delete">\n          <img src="./img/delete.svg" alt="" class="table__remove" onclick=\'removeClient("').concat(e.uuid,'", "').concat(e.clientname,'")\' title="Remove"> \n          </div>\n          </td> \n             \n            </tr>')}).join(""),t.innerHTML=i,e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),swal("Ohhh no!",e.t0.response.data,"warning"),console.error(e.t0);case 18:case"end":return e.stop()}},null,null,[[0,14]])}function removeClient(n,e){try{swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this client ".concat(e,"!"),icon:"warning",buttons:!0,dangerMode:!0}).then(function(e){e?deleteClient(n):swal("Your client is safe!")})}catch(e){console.error(e)}}function deleteClient(n){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(axios.delete("/clients/deleteClient/".concat(n)));case 3:renderClients(e.sent.data.allClients.clients),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},null,null,[[0,7]])}function editClient(n){var t,r,a,i;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,modalEdit){e.next=3;break}throw new Error("There is a problem finding the modal in the HTML");case 3:if(modalEdit.style.display="block",modalEdit.classList.add("showModal"),t=document.querySelector("#formEdit")){e.next=8;break}throw new Error("There is a problem finding form from HTML");case 8:return e.next=10,regeneratorRuntime.awrap(axios.get("clients/findClient/".concat(n)));case 10:r=e.sent,a=r.data.foundClient,i='\n                <div id="checkRadioButton" onmouseenter=\'radioButtonCheck("'.concat(a.projectType,'")\'>\n                 <h3>Edit client</h3>\n\n                <div class="form__wrapper">\n                    <input type="text" name="clientname" value="').concat(a.clientname,'" placeholder="Clientname" required>\n                </div>\n\n\n                <div class="form__wrapper">\n                    <input type="text" name="phone" value="').concat(a.phone,'" placeholder="Phone" required>\n                </div>\n\n                <div class="form__wrapper">\n                    <input type="email" name="email" value="').concat(a.email,'" placeholder="Email" required>\n                </div>\n\n                <div>\n                <label for="branding2">Branding:</label>\n                <input type="radio" id="branding2" name="projectType" value="branding">\n    \n                <label for="design2">Design:</label>\n                <input type="radio" id="design2" name="projectType" value="design">\n    \n                <label for="business2">Business:</label>\n                <input type="radio" id="business2" name="projectType" value="business">\n    \n                </div>\n                <input type="submit" value="Update client">\n                </div>'),t.innerHTML=i,clientIdEdit=a.uuid,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0);case 20:case"end":return e.stop()}},null,null,[[0,17]])}handleForm.addEventListener("submit",handleNewClient);var selected=document.querySelector(".selected"),optionsContainer=document.querySelector(".options-container"),optionsList=document.querySelectorAll(".option"),btn=document.querySelector(".button-form"),selectedAll=document.querySelectorAll(".selected");function radioButtonCheck(e){try{var n=document.querySelector("#checkRadioButton");if(!n)throw new Error("The is a problem finding the element to check the radio button");var t=document.querySelector("#branding2");if(!t)throw new Error('The is a problem finding the element "branding" radio button');var r=document.querySelector("#design2");if(!r)throw new Error('The is a problem finding the element "design" radio button');var a=document.querySelector("#business2");if(!a)throw new Error('The is a problem finding the element "business" radio button');switch(e){case"branding":t.checked=!0;break;case"design":r.checked=!0;break;case"business":a.checked=!0}n.onmouseenter=null}catch(e){console.error(e)}}function handleEdit(n){var t,r,a,i,o,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=n.target.elements,r=t.clientname,a=t.phone,i=t.email,o=t.projectType,r=r.value,a=a.value,i=i.value,o=o.value,r&&a&&i&&o){e.next=8;break}throw new Error("You need to complete all the fields");case 8:if(modalEdit){e.next=10;break}throw new Error("There is a problem finding modalEdit from HTML");case 10:return modalEdit.style.display="none",n.target.reset(),c={clientname:r,phone:a,email:i,projectType:o},e.next=15,regeneratorRuntime.awrap(axios.put("/clients/editClient/".concat(clientIdEdit),c));case 15:renderClients(e.sent),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(0),alert(e.t0),swal("Ohhh no!","".concat(e.t0),"warning"),console.error(e.t0);case 24:case 25:case"end":return e.stop()}},null,null,[[0,19]])}selectedAll.forEach(function(n){var t=n.previousElementSibling,e=t.querySelectorAll(".option");n.addEventListener("click",function(){var e;t.classList.contains("active")?t.classList.remove("active"):((e=document.querySelector(".options-container.active"))&&e.classList.remove("active"),t.classList.add("active"))}),e.forEach(function(e){e.addEventListener("click",function(){n.innerHTML=e.querySelector("label").innerHTML,t.classList.remove("active")})})}),selected.addEventListener("click",function(){btn.classList.toggle("button-hiden")});