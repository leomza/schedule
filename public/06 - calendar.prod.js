"use strict";var TIMEOFFSET="+05:30",dateTimeForCalander=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1;n<10&&(n="0".concat(n));var a=e.getDate();a<10&&(a="0".concat(a));var r=e.getHours();r<10&&(r="0".concat(r));var o=e.getMinutes();o<10&&(o="0".concat(o));var c="".concat(t,"-").concat(n,"-").concat(a,"T").concat(r,":").concat(o,":00.000").concat(TIMEOFFSET),i=new Date(Date.parse(c)),s=new Date(new Date(i).setHours(i.getHours()+1));return{start:i,end:s}},dateTime=dateTimeForCalander();function handleCreateEvent(e){try{e.preventDefault();var t=e.target.elements,n=t.title,a=t.description,n=(t.startEvent,t.endEvent,eventTitle.value),a=eventDescription.value,r=(eventStart.value,eventEnd.value,{summary:"".concat(n),description:"".concat(a),start:{dateTime:dateTime.start,timeZone:"Asia/Jerusalem"},end:{dateTime:dateTime.end,timeZone:"Asia/Jerusalem"}});e.target.reset(),createEvent(r)}catch(e){console.error(e)}}function createEvent(t){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(axios.post("/calendar/createEvent",t));case 3:n=e.sent,console.log(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},null,null,[[0,7]])}function getEvents(){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=5,regeneratorRuntime.awrap(axios.post("/calendar/getAllEvents",{startDate:"2020-10-03T00:00:00.000Z",endDate:"2021-10-04T00:00:00.000Z"}));case 5:t=e.sent,console.log(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}},null,null,[[0,9]])}var CLIENT_ID="737686618954-d0k28hcsdajurnrt1mj4v7rhv3p87bd4.apps.googleusercontent.com",API_KEY="AIzaSyBT-xOdFVT38YxGiOY3fbnblgVlbQ0kfO0",DISCOVERY_DOCS=["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],SCOPES="https://www.googleapis.com/auth/calendar.readonly",authorizeButton=document.getElementById("authorize_button"),signoutButton=document.getElementById("signout_button");function handleClientLoad(){gapi.load("client:auth2",initClient)}function initClient(){gapi.client.init({apiKey:API_KEY,clientId:CLIENT_ID,discoveryDocs:DISCOVERY_DOCS,scope:SCOPES}).then(function(){gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus),updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get()),authorizeButton.onclick=handleAuthClick,signoutButton.onclick=handleSignoutClick},function(e){renderCalendarInfo(JSON.stringify(e,null,2))})}function updateSigninStatus(e){e?(authorizeButton.style.display="none",signoutButton.style.display="block",listUpcomingEvents()):(authorizeButton.style.display="block",signoutButton.style.display="none")}function handleAuthClick(e){gapi.auth2.getAuthInstance().signIn()}function handleSignoutClick(e){gapi.auth2.getAuthInstance().signOut()}function listUpcomingEvents(){gapi.client.calendar.events.list({calendarId:"primary",timeMin:(new Date).toISOString(),showDeleted:!1,singleEvents:!0,maxResults:10,orderBy:"startTime"}).then(function(e){var t=e.result.items;renderCalendarInfo(t),pepe(t)})}function renderCalendarInfo(e){try{console.log(e);var t=document.querySelector("#calendarInfo"),n=e.map(function(e){var t=formatCalendarDate(e.start);return'\n           <div class="task-calendar">\n                    <div class="task-titles-calendar">\n                        <p>'.concat(e.summary,'</p>\n                    </div>\n\n                    <div class="task-date-calendar">\n                        <p>').concat(t,"</p>\n                    </div>\n\n                </div>\n             ")}).join("");t.innerHTML=n}catch(e){console.error(e)}}var pepe=function(e){new Date;var t=document.getElementById("eventToday"),n=document.querySelector(".noEvent"),a=e.map(function(e){if("9:00 PM"===e.start.dateTime)return n.style.display="none","\n        <p>".concat(e.start.dateTime,"</p>\n        ")}).join("");t.innerHTML=a};function formatCalendarDate(e){try{return e.dateTime?(e.dateTime=moment(e.dateTime).format("LT"),e.dateTime):e.date?(e.date=moment(e.date).format("dddd"),"All  ".concat(e.date)):e="No specified"}catch(e){console.error(e)}}var currentTime=function e(){var t=new Date,n=t.getHours(),a=t.getMinutes();n=updatetime(n=0==n?12:12<n?n-12:n),a=updatetime(a);setTimeout(e,1e3);document.getElementById("clock").innerHTML="\n    <div class='clock__container'>\n\n\n\n\n   <p class='clock__container__hour'> ".concat(n,"</p>\n\n   <p class='clock__container__min'> ").concat(a,"</p>\n\n\n    </div>\n    ")},updatetime=function(e){return e<10?"0"+e:e};currentTime();